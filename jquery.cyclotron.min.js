(function(a){a.fn.cyclotron=function(b){return this.each(function(){var d,q,r=0,c,k=0,n,g,m=[],p=0,j=0;d=a(this);var f=a.extend({dampingFactor:0.93,historySize:5,autorotation:0,continuous:1},b);if((f.dampingFactor>1||f.dampingFactor<0)){if(typeof console==="object"){console.log("dampingFactor out of range "+f.dampingFactor)}f.dampingFactor=0.93}if(f.continuous===1&&d.hasClass("nonContinuous")){f.continuous=0}if(f.continuous===0){var o=d.css("background-image").replace(/^url\(["']?/,"").replace(/["']?\)$/,"");var e=new Image();a(e).load(function(){p=e.width-d.width()});e.src=o}if(f.autorotation!=0){c=false;r=f.autorotation}d.bind("touchstart mousedown",function(s){var h=(s.pageX>0?s.pageX:s.originalEvent.touches[0].pageX);q=h-k;c=true;s.preventDefault()});d.bind("touchmove mousemove",function(s){if(c){var h=(s.pageX>0?s.pageX:s.originalEvent.touches[0].pageX);if(typeof g==="undefined"){g=h}k=h-q;if(m.length>f.historySize){m.shift()}m.push(g-h);i();d.css("background-position",k);g=h}});d.bind("mouseleave mouseup touchend",function(){if(c){var h=m.length,s=m[h-1];for(var t=0;t<h;t++){s=(s*h+(m[t]))/(h+1)}r=s}c=false});n=function(){if(!c&&r){r*=f.dampingFactor;k-=r;i();d.css("background-position",k);if(Math.abs(r)<0.001){r=0}}};window.requestAnimFrame=(function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(h){window.setTimeout(h,100/6)}})();(function l(){requestAnimFrame(l);n()})();function i(){if(f.continuous===0){if(-k<j){r=0;k=-j}if(-k>p){r=0;k=-p}}}})}}(jQuery));jQuery(document).ready(function(){$(".cyclotron").cyclotron()});
